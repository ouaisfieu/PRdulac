<!-- index.html ‚Äî DOSSIER ‚ÄúBLEUS & ORANGES‚Äù (ensemble) ‚Ä¢ 100% statique ‚Ä¢ m√©dia live + dossier ‚Ä¢ bas√© sur doc fourni -->
<!-- Source documentaire interne : ‚ÄúTensions politiques autour de l‚Äô√©ducation populaire : contexte et enjeux‚Äù :contentReference[oaicite:0]{index=0} -->
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="color-scheme" content="dark light"/>
  <title>Bleus & Oranges ‚Äî Dossier live (√©ducation populaire)</title>
  <meta name="description" content="M√©dia statique type info en continu : tensions autour de l‚Äô√©ducation populaire, focus Bleus & Oranges, timeline, preuves, kit, embeds."/>
  <meta name="theme-color" content="#0b0f1f"/>

  <!-- OG -->
  <meta property="og:title" content="Bleus & Oranges ‚Äî Dossier live (√©ducation populaire)"/>
  <meta property="og:description" content="Landing + dossier : timeline, preuves, posts, kit export. Statique, publish-ready."/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="assets/og.png"/>
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>

  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Bleus & Oranges ‚Äî Dossier live"/>
  <meta name="twitter:description" content="Tensions autour de l‚Äô√©ducation populaire : focus Bleus & Oranges, timeline, preuves, kit."/>
  <meta name="twitter:image" content="assets/og.png"/>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "name":"Bleus & Oranges ‚Äî Dossier live",
    "description":"Site statique type m√©dia live sur les tensions autour de l‚Äô√©ducation populaire, focus Bleus & Oranges.",
    "inLanguage":"fr"
  }
  </script>

  <style>
    :root{
      --bg:#070a14; --bg2:#0b1024;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.04);
      --line: rgba(255,255,255,.12);
      --text:#eaf0ff; --muted:#a7b2d6; --faint:#7e88b6;

      /* Duo BLEU / ORANGE */
      --blue:#2a7bff;
      --cyan:#32d6ff;
      --orange:#ff9a2f;
      --amber:#ffd36a;

      --good:#3df0a8; --warn:#ffcc66; --bad:#ff5c7a;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --r: 20px; --r2: 28px;
      --shadow: 0 22px 100px rgba(0,0,0,.45);
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f8ff; --bg2:#eef2ff;
        --panel: rgba(10,16,36,.05);
        --panel2: rgba(10,16,36,.03);
        --line: rgba(10,16,36,.12);
        --text:#0a1024; --muted:#2b3968; --faint:#52609a;
        --shadow: 0 22px 90px rgba(10,16,36,.14);
      }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1000px 700px at 10% -10%, rgba(42,123,255,.34), transparent 60%),
        radial-gradient(1000px 700px at 110% 10%, rgba(255,154,47,.26), transparent 55%),
        radial-gradient(900px 650px at 55% 120%, rgba(50,214,255,.14), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }
    a{color:inherit}
    .noise{
      pointer-events:none;
      position:fixed; inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.24'/%3E%3C/svg%3E");
      opacity:.09;
      mix-blend-mode: overlay;
    }
    .bg-anim{
      position:fixed; inset:-50px;
      background:
        radial-gradient(420px 280px at 20% 30%, rgba(42,123,255,.20), transparent 60%),
        radial-gradient(420px 280px at 70% 20%, rgba(255,154,47,.18), transparent 60%),
        radial-gradient(420px 280px at 60% 70%, rgba(50,214,255,.10), transparent 60%);
      filter: blur(10px);
      opacity:.7;
      animation: drift 18s ease-in-out infinite alternate;
      pointer-events:none;
    }
    @keyframes drift{
      0%{transform: translate3d(-10px,-10px,0) scale(1)}
      100%{transform: translate3d(14px,16px,0) scale(1.02)}
    }

    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(8,10,18,.78), rgba(8,10,18,.34));
      border-bottom:1px solid var(--line);
    }
    @media (prefers-color-scheme: light){
      .topbar{background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.55));}
    }
    .topbar .inner{
      max-width: 1280px;
      margin:0 auto;
      padding: 12px 16px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .brand{
      display:flex; gap:10px; align-items:center;
      min-width: 310px;
    }
    .logo{
      width:42px; height:42px;
      border-radius: 16px;
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(255,255,255,.38), transparent 60%),
        conic-gradient(from 180deg, var(--blue), var(--cyan), var(--orange), var(--amber), var(--blue));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 18px 60px rgba(42,123,255,.18);
      position:relative;
    }
    .logo:after{
      content:"";
      position:absolute; inset:10px;
      border-radius: 12px;
      background: rgba(10,14,26,.35);
      border: 1px solid rgba(255,255,255,.10);
    }
    @media (prefers-color-scheme: light){
      .logo:after{background: rgba(255,255,255,.52)}
    }
    .brand h1{margin:0;font-size:14px;letter-spacing:.3px}
    .brand .sub{font-size:12px;color:var(--muted);margin-top:2px}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      font-size:12px; color: var(--muted);
      border:1px solid var(--line);
      background: var(--panel);
      padding: 8px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }
    .dot{width:9px;height:9px;border-radius:999px;background:var(--good);box-shadow:0 0 0 3px rgba(61,240,168,.16)}
    .mono{font-family:var(--mono)}
    .search{
      flex:1;
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid var(--line);
      background: var(--panel);
      box-shadow: 0 20px 80px rgba(0,0,0,.18);
      min-width: 160px;
    }
    .search input{
      width:100%;
      border:none; outline:none;
      background:transparent;
      color:var(--text);
      font-size: 13px;
    }
    .kbd{
      font-family:var(--mono);
      font-size:11px;
      color: var(--faint);
      padding: 4px 7px;
      border-radius: 10px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.16);
    }
    @media (prefers-color-scheme: light){
      .kbd{background: rgba(10,16,36,.06)}
    }
    .btn{
      cursor:pointer;
      user-select:none;
      border:none;
      color: var(--text);
      background: var(--panel);
      border:1px solid var(--line);
      border-radius: 16px;
      padding: 10px 12px;
      font-size: 12px;
      display:inline-flex; gap:8px; align-items:center;
      transition: transform .08s ease, border-color .15s ease, background .15s ease, box-shadow .15s ease;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(42,123,255,.55)}
    .btn:active{transform: translateY(0)}
    .btn.blue{
      background: linear-gradient(135deg, rgba(42,123,255,.25), rgba(50,214,255,.14));
      border-color: rgba(42,123,255,.55);
      box-shadow: 0 18px 70px rgba(42,123,255,.12);
    }
    .btn.orange{
      background: linear-gradient(135deg, rgba(255,154,47,.22), rgba(255,211,106,.12));
      border-color: rgba(255,154,47,.55);
      box-shadow: 0 18px 70px rgba(255,154,47,.10);
    }
    .btn.good{border-color: rgba(61,240,168,.45)}
    .btn.bad{border-color: rgba(255,92,122,.45)}
    .btn:focus{outline: 2px solid rgba(50,214,255,.35); outline-offset: 2px}

    /* Layout */
    .wrap{
      max-width: 1280px;
      margin:0 auto;
      padding: 18px 16px 40px;
      display:grid;
      gap:14px;
      grid-template-columns: 1.15fr .85fr;
      align-items:start;
    }
    @media (max-width: 1020px){ .wrap{grid-template-columns: 1fr} }

    .hero{
      border-radius: var(--r2);
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(800px 340px at 12% 0%, rgba(42,123,255,.18), transparent 60%),
        radial-gradient(800px 340px at 88% 10%, rgba(255,154,47,.16), transparent 60%),
        radial-gradient(800px 380px at 65% 120%, rgba(50,214,255,.10), transparent 60%);
      pointer-events:none;
      opacity:.85;
    }
    .hero .inner{
      position:relative;
      padding: 22px 18px 18px;
      display:grid;
      gap:14px;
      grid-template-columns: 1.2fr .8fr;
      align-items:start;
    }
    @media (max-width: 820px){ .hero .inner{grid-template-columns: 1fr} }

    .h-title{
      margin:0;
      font-size: 22px;
      letter-spacing:.2px;
      line-height: 1.15;
    }
    .h-sub{
      margin:8px 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55rem;
    }
    .ctaRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .chips{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
    .chip{
      font-size:11px;
      color: var(--muted);
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      padding: 7px 9px;
      border-radius: 999px;
    }
    .chip strong{color: var(--text); font-weight:600}
    .chip.blue{border-color: rgba(42,123,255,.35)}
    .chip.orange{border-color: rgba(255,154,47,.35)}

    .sideCard{
      border-radius: var(--r2);
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardHd{
      padding: 14px 14px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
      background: linear-gradient(180deg, rgba(255,255,255,.05), transparent);
    }
    @media (prefers-color-scheme: light){
      .cardHd{border-bottom:1px solid rgba(10,16,36,.10)}
    }
    .cardHd h2{
      margin:0;
      font-size: 13px;
      letter-spacing:.2px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .cardHd p{
      margin: 4px 0 0;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35rem;
    }
    .cardBd{padding: 12px 14px 14px}
    .grid3{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px}
    @media (max-width: 1020px){ .grid3{grid-template-columns: repeat(2, 1fr)} }
    @media (max-width: 560px){ .grid3{grid-template-columns: 1fr} }

    .kpi{
      border-radius: 18px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      padding: 10px;
      min-height: 76px;
    }
    .kpi .n{font-family:var(--mono);font-size:18px}
    .kpi .l{margin-top:6px;font-size:11px;color:var(--faint)}
    .kpi .b{margin-top:6px;font-size:12px;color:var(--muted);line-height:1.25rem}

    /* Feed */
    .section{
      border-radius: var(--r2);
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .ticker{
      display:flex; gap:12px; align-items:center;
      padding: 10px 14px;
      border-top:1px solid rgba(255,255,255,.10);
      border-bottom:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    @media (prefers-color-scheme: light){
      .ticker{border-top:1px solid rgba(10,16,36,.10);border-bottom:1px solid rgba(10,16,36,.10)}
    }
    .ticker strong{font-size:12px}
    .marq{white-space:nowrap; font-size:12px; color:var(--muted); animation: marq 30s linear infinite}
    @keyframes marq{0%{transform:translateX(0)}100%{transform:translateX(-55%)}}

    .feed{display:flex; flex-direction:column; gap:10px}
    .story{
      border-radius: var(--r);
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      overflow:hidden;
      transition: transform .10s ease, border-color .15s ease;
    }
    @media (prefers-color-scheme: light){
      .story{border:1px solid rgba(10,16,36,.12); background: rgba(10,16,36,.03)}
    }
    .story:hover{transform: translateY(-1px); border-color: rgba(42,123,255,.35)}
    .shd{padding: 12px 12px 8px; display:flex; gap:10px; align-items:flex-start}
    .badge{
      font-family:var(--mono);
      font-size:11px;
      padding: 6px 8px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      white-space:nowrap;
    }
    @media (prefers-color-scheme: light){
      .badge{background: rgba(10,16,36,.05);border:1px solid rgba(10,16,36,.10)}
    }
    .badge.breaking{border-color: rgba(255,92,122,.55); color: var(--text)}
    .badge.proof{border-color: rgba(61,240,168,.45); color: var(--text)}
    .badge.blue{border-color: rgba(42,123,255,.55); color: var(--text)}
    .badge.orange{border-color: rgba(255,154,47,.55); color: var(--text)}
    .story h3{margin:0; font-size: 13px; line-height: 1.25rem}
    .meta{margin-top:6px; display:flex; flex-wrap:wrap; gap:8px; font-size:11px; color:var(--faint); font-family:var(--mono)}
    .txt{
      padding: 0 12px 10px;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.5rem;
    }
    .actions{
      padding: 10px 12px 12px;
      border-top:1px dashed rgba(255,255,255,.14);
      display:flex; flex-wrap:wrap; gap:10px;
    }
    @media (prefers-color-scheme: light){
      .actions{border-top:1px dashed rgba(10,16,36,.10)}
    }

    /* Viewer + modal */
    .viewer{
      border-radius: var(--r2);
      border:1px solid var(--line);
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:sticky;
      top: 86px;
      max-height: calc(100vh - 110px);
      display:flex;
      flex-direction:column;
    }
    @media (max-width: 1020px){
      .viewer{position:relative; top:auto; max-height:none}
    }
    .viewer .body{padding: 14px; overflow:auto}
    .hr{height:1px; background: rgba(255,255,255,.10); margin: 12px 0}
    @media (prefers-color-scheme: light){
      .hr{background: rgba(10,16,36,.10)}
    }
    .notice{
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      border-radius: 18px;
      padding: 10px 12px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.4rem;
    }
    .notice strong{color: var(--text)}
    .content{
      font-size: 13.5px;
      line-height: 1.65rem;
    }
    .content p{margin: 0 0 10px}
    .content h3{margin: 12px 0 8px; font-size: 14px}
    .content ul{margin: 6px 0 10px 18px}
    .content li{margin: 4px 0}
    .content code{font-family: var(--mono)}
    .content pre{
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      padding: 12px;
      overflow:auto;
    }
    @media (prefers-color-scheme: light){
      .content pre{background: rgba(10,16,36,.04);border:1px solid rgba(10,16,36,.10)}
    }

    .modal{
      position:fixed; inset:0;
      display:none;
      align-items:center; justify-content:center;
      background: rgba(0,0,0,.6);
      z-index: 200;
      padding: 14px;
    }
    .modal.open{display:flex}
    .mcard{
      width: min(1120px, 100%);
      max-height: 92vh;
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(12,16,32,.92);
      backdrop-filter: blur(18px);
      box-shadow: 0 24px 110px rgba(0,0,0,.6);
      overflow:hidden;
    }
    @media (prefers-color-scheme: light){
      .mcard{background: rgba(255,255,255,.92); border:1px solid rgba(10,16,36,.12)}
    }
    .mhd{
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    @media (prefers-color-scheme: light){
      .mhd{border-bottom:1px solid rgba(10,16,36,.10)}
    }
    .mhd h4{margin:0;font-size:13px}
    .mhd p{margin:2px 0 0;color:var(--muted);font-size:11.5px}
    .mbd{padding: 12px; overflow:auto; max-height: calc(92vh - 56px)}
    iframe.embed{
      width:100%;
      height: 72vh;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: white;
    }

    /* Widgets */
    .viralRow{display:flex; gap:10px; flex-wrap:wrap}
    .shareBox{
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      border-radius: 18px;
      padding: 10px;
      display:flex; flex-direction:column; gap:10px;
    }
    .field{
      display:flex; gap:10px; flex-wrap:wrap;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      border-radius: 16px;
      padding: 10px;
      align-items:center;
    }
    .field input, .field textarea, .field select{
      flex:1;
      min-width: 220px;
      border:none; outline:none;
      background: transparent;
      color: var(--text);
      font-size: 12.5px;
      line-height: 1.35rem;
      font-family: var(--sans);
      resize: vertical;
    }
    select{appearance:none}
    .small{font-size:11px;color:var(--faint);font-family:var(--mono)}
    .footer{
      max-width: 1280px;
      margin: 0 auto;
      padding: 18px 16px 40px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.45rem;
    }
    .divider{height:1px;background:rgba(255,255,255,.10);margin:16px 0}
    @media (prefers-color-scheme: light){
      .divider{background: rgba(10,16,36,.10)}
    }

    /* Tiny ‚Äúnewsroom‚Äù strip */
    .strip{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      padding: 10px 14px;
      border-top:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.02);
    }
    @media (prefers-color-scheme: light){
      .strip{border-top:1px solid rgba(10,16,36,.10)}
    }
    .tagbtn{
      font-family: var(--mono);
      font-size: 11px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      color: var(--muted);
      border-radius: 999px;
      padding: 8px 10px;
      cursor:pointer;
      transition: transform .08s ease, border-color .15s ease;
    }
    @media (prefers-color-scheme: light){
      .tagbtn{background: rgba(10,16,36,.05); border:1px solid rgba(10,16,36,.10)}
    }
    .tagbtn:hover{transform: translateY(-1px); border-color: rgba(50,214,255,.45)}
    .tagbtn.blue{border-color: rgba(42,123,255,.35)}
    .tagbtn.orange{border-color: rgba(255,154,47,.35)}
    .tagbtn.on{color: var(--text); border-color: rgba(61,240,168,.35)}
  </style>
</head>

<body>
  <div class="bg-anim" aria-hidden="true"></div>
  <div class="noise" aria-hidden="true"></div>

  <header class="topbar">
    <div class="inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div style="min-width:0">
          <h1>BLEUS <span class="mono" style="opacity:.65">√ó</span> ORANGES ‚Äî Dossier live</h1>
          <div class="sub">Tensions autour de l‚Äô√©ducation populaire ‚Ä¢ timeline ‚Ä¢ preuves ‚Ä¢ kit</div>
        </div>
      </div>

      <div class="pill"><span class="dot"></span><span>LIVE</span><span class="mono" id="clock"></span></div>

      <div class="search" role="search" aria-label="Recherche">
        <span class="mono" style="opacity:.7">‚åï</span>
        <input id="q" placeholder="Rechercher : attaques, coalition, d√©cret-programme, tactiques, etc." />
        <span class="kbd" title="Raccourci">/</span>
      </div>

      <button class="btn blue" id="btnOpenDoc">Ouvrir doc</button>
      <button class="btn orange" id="btnFocusCoal">Focus coalition</button>
      <button class="btn" id="btnCopyLink">Copier lien</button>
    </div>
  </header>

  <main class="wrap">
    <!-- Left -->
    <section>
      <div class="hero">
        <div class="inner">
          <div>
            <h2 class="h-title">Un seul fichier : le duel narratif + le n≈ìud de coalition.</h2>
            <p class="h-sub">
              Ce site met <strong>Bleus</strong> (p√¥le lib√©ral) et <strong>Oranges</strong> (p√¥le centriste social-chr√©tien) dans un m√™me dispositif :
              <strong>fil d‚Äôactu</strong> + <strong>timeline</strong> + <strong>lecteur</strong> + <strong>posts</strong> + <strong>kit export</strong>.
              <span class="small">Base interne : doc ‚ÄúTensions politiques autour de l‚Äô√©ducation populaire‚Äù.</span>
            </p>

            <div class="chips" id="chips"></div>

            <div class="ctaRow">
              <button class="btn blue" id="btnStart">‚ö° Pitch √©ditorial</button>
              <button class="btn orange" id="btnAngles">üéØ Angles ‚ÄúBleu/Orange‚Äù</button>
              <button class="btn" id="btnKit">‚¨áÔ∏é Export kit</button>
              <button class="btn good" id="btnShare">Partager</button>
            </div>
          </div>

          <div class="shareBox">
            <div class="small">‚öôÔ∏è Viral hooks (pr√™ts)</div>

            <div class="viralRow">
              <button class="btn blue" id="btnMakePostBlue">Post BLEU</button>
              <button class="btn orange" id="btnMakePostOrange">Post ORANGE</button>
              <button class="btn" id="btnMakePostBoth">Post BLEU√óORANGE</button>
              <button class="btn" id="btnWOW">Mode ‚ÄúWOW‚Äù</button>
            </div>

            <div class="field">
              <input id="shareText" value="Bleus √ó Oranges : dossier live sur les tensions autour de l‚Äô√©ducation populaire ‚Äî timeline, preuves, angles, kit." />
              <button class="btn" id="btnCopyPost">Copier</button>
            </div>

            <div class="notice">
              <strong>Contenu</strong> : analyse, angles, tactiques, et timeline. <br/>
              <span class="small">Aucune identit√© priv√©e : codage ‚ÄúBleus/Oranges‚Äù.</span>
            </div>
          </div>
        </div>

        <div class="ticker">
          <strong class="mono">FLASH</strong>
          <div class="marq" id="marq">
            ‚Ä¢ Offensives rh√©toriques ‚Ä¢ ‚ÄúASBL politis√©es‚Äù ‚Ä¢ coalition MR‚ÄìEngag√©s ‚Ä¢ d√©cret-programme ‚Ä¢ aust√©rit√© ‚Ä¢ contre-pouvoir associatif ‚Ä¢
          </div>
        </div>

        <div class="strip" id="strip">
          <button class="tagbtn blue" data-camp="blue">BLEU</button>
          <button class="tagbtn orange" data-camp="orange">ORANGE</button>
          <button class="tagbtn" data-camp="both">BLEU√óORANGE</button>
          <button class="tagbtn" data-type="proof">PREUVES</button>
          <button class="tagbtn" data-type="breaking">BREAKING</button>
          <span class="small" id="filterLabel">filtre: aucun</span>
        </div>
      </div>

      <div class="section" style="margin-top:14px">
        <div class="cardHd">
          <div style="min-width:0">
            <h2>Fil ‚Äúactu + preuves‚Äù</h2>
            <p>Stories pr√™tes √† publier et √† citer, tri instantan√©.</p>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end">
            <button class="btn" id="btnReset">Reset</button>
          </div>
        </div>
        <div class="cardBd">
          <div class="feed" id="feed"></div>
        </div>
      </div>

      <div class="section" style="margin-top:14px">
        <div class="cardHd">
          <div style="min-width:0">
            <h2>Embeds (local + plateformes)</h2>
            <p>Ajoute tes iframes (Spotify/YouTube/Docs) + fichiers locaux.</p>
          </div>
          <button class="btn" id="btnOpenEmbeds">Ouvrir</button>
        </div>
        <div class="cardBd">
          <div class="notice">
            Place les fichiers dans le m√™me dossier que <span class="mono">index.html</span> et ajoute-les ici :
            <span class="mono">anonymised.pdf</span>, <span class="mono">doc.pdf</span>, <span class="mono">data.json</span>, <span class="mono">notes.md</span>, etc.
          </div>
        </div>
      </div>
    </section>

    <!-- Right -->
    <aside class="viewer">
      <div class="cardHd">
        <div style="min-width:0">
          <h2 id="viewTitle">Lecteur</h2>
          <p id="viewSub">S√©lectionne une story. Ou ouvre le doc.</p>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end">
          <button class="btn" id="btnRedact">Redact</button>
          <button class="btn bad" id="btnClear">Clear</button>
        </div>
      </div>
      <div class="body">
        <div class="grid3" id="kpis">
          <div class="kpi"><div class="n" id="kStories">‚Äî</div><div class="l">stories</div><div class="b">fil √©ditorial</div></div>
          <div class="kpi"><div class="n" id="kTags">‚Äî</div><div class="l">tags</div><div class="b">tri instantan√©</div></div>
          <div class="kpi"><div class="n" id="kProof">‚Äî</div><div class="l">preuves</div><div class="b">ancrage doc</div></div>
        </div>

        <div class="hr"></div>

        <div class="notice">
          <strong>R√©sum√© (Bleus √ó Oranges)</strong> : la doc d√©crit des tensions (depuis 2022) autour de l‚Äô√©ducation populaire,
          avec des offensives ‚ÄúBleues‚Äù (mise en cause des ‚ÄúASBL politis√©es‚Äù, attaques publiques) et un r√¥le ‚ÄúOrange‚Äù souvent plus mod√©rateur
          dans le cadre de coalition et d‚Äô√©criture d‚Äôaccords, mais avec un contexte budg√©taire dur (d√©cret-programme / coupes). :contentReference[oaicite:1]{index=1}
        </div>

        <div class="hr"></div>

        <div class="content" id="content">
          <h3>Mode d‚Äôemploi</h3>
          <ul>
            <li>Filtre <strong>BLEU</strong>, <strong>ORANGE</strong>, ou <strong>BLEU√óORANGE</strong> via les tags.</li>
            <li>G√©n√®re un post pr√™t √† publier (boutons en haut).</li>
            <li>Export ‚Äúkit‚Äù pour archive / diffusion.</li>
          </ul>
          <p class="small">Base interne : document fourni. :contentReference[oaicite:2]{index=2}</p>
        </div>

        <div class="hr"></div>

        <div class="notice">
          <strong>Doc attendu</strong> : mets un PDF local pour lecture iframe, ex. <span class="mono">doc.pdf</span> (ou adapte la constante).
          <div class="small" style="margin-top:6px">Le doc original est un .docx. Convertis-le en PDF pour l‚Äôembed.</div>
        </div>
      </div>
    </aside>
  </main>

  <footer class="footer">
    <div class="divider"></div>
    <div class="small">
      ¬© Site statique ‚Äî ‚ÄúBleus & Oranges ‚Äî Dossier live‚Äù. Base interne : doc sur tensions autour de l‚Äô√©ducation populaire. :contentReference[oaicite:3]{index=3}
    </div>
  </footer>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="Contenu">
    <div class="mcard">
      <div class="mhd">
        <div>
          <h4 id="mTitle">‚Äî</h4>
          <p id="mSub">‚Äî</p>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn" id="mCopy">Copier</button>
          <button class="btn" id="mDownload">T√©l√©charger</button>
          <button class="btn bad" id="mClose">Fermer</button>
        </div>
      </div>
      <div class="mbd" id="mBody"></div>
    </div>
  </div>

  <script>
  (() => {
    // Mets ici un PDF converti depuis le docx si tu veux l‚Äôembed direct
    const DOC_PDF_PATH = "doc.pdf"; // optionnel
    const INTERNAL_DOC_CITE = "Doc interne: ‚ÄúTensions politiques autour de l‚Äô√©ducation populaire : contexte et enjeux‚Äù";

    const BRAND_TAGS = [
      {t:"Bleus: offensives rh√©toriques", c:"blue"},
      {t:"Oranges: modulation / coalition", c:"orange"},
      {t:"Aust√©rit√© / d√©cret-programme", c:""},
      {t:"ASBL ‚Äúpolitis√©es‚Äù", c:"blue"},
      {t:"Concertation / √©quilibre", c:"orange"},
      {t:"Contre-pouvoir associatif", c:""},
      {t:"Tactiques de disqualification", c:"blue"},
      {t:"Compromis d‚Äôaccords", c:"orange"},
      {t:"Mobilisations", c:""}
    ];

    // Stories d√©riv√©es (sans noms propres, au niveau ‚Äúfaits / m√©canismes / angles‚Äù)
    // Bas√© sur le doc interne fourni (tensions 2022‚Äì2025, cas audition 2024, coalition MR‚ÄìEngag√©s, d√©cret-programme, tactiques) :contentReference[oaicite:4]{index=4}
    const STORIES = [
      {
        id: uid(), ts: dateTs("2024-06-19T10:00:00"),
        badge: "BREAKING", breaking: true, proof: false,
        camp: "blue",
        title: "√âpisode d‚Äôaudition : la mise en cause publique des ‚ÄúASBL politis√©es‚Äù",
        tags: ["audition", "ASBL", "disqualification", "bleu"],
        body:
`Dans la doc interne, un √©pisode embl√©matique d√©crit une audition o√π un leader ‚ÄúBleu‚Äù interrompt une repr√©sentante associative et l‚Äôaccuse d‚Äôattachement partisan.
Angle : faire d√©vier le d√©bat du fond vers la l√©gitimit√© de la parole associative.
‚Üí M√©canique : proc√®s en politisation + suspicion de financement.`,
        cite: true
      },
      {
        id: uid(), ts: dateTs("2024-07-26T09:00:00"),
        badge: "PREUVE", breaking: false, proof: true,
        camp: "both",
        title: "Coalition : phrase ‚Äúmuscl√©e‚Äù + r√©daction ‚Äúrassurante‚Äù (compromis de texte)",
        tags: ["coalition", "accord", "cadre", "bleu", "orange"],
        body:
`La doc d√©crit un compromis de coalition : une proclamation ‚Äúcoup de poing‚Äù sur les ASBL politis√©es (marqueur Bleu),
tandis que le reste du chapitre est r√©dig√© de fa√ßon plus rassurante (marqueur Orange).
‚Üí Lecture : signal politique vs gestion de coalition.`,
        cite: true
      },
      {
        id: uid(), ts: dateTs("2024-10-10T08:00:00"),
        badge: "INFO", breaking: false, proof: false,
        camp: "orange",
        title: "Oranges : r√©flexe associatif historique et logique de ‚Äúmain dans la main‚Äù",
        tags: ["associatif", "concertation", "orange"],
        body:
`Le p√¥le ‚ÄúOrange‚Äù est d√©crit comme plus prudent dans l‚Äôattaque frontale du monde associatif, en partie par culture politique et ancrages historiques.
‚Üí Angle : arbitrage, stabilisation, √©viter l‚Äôincendie tout en assumant un cadre budg√©taire.`,
        cite: true
      },
      {
        id: uid(), ts: dateTs("2024-12-05T12:00:00"),
        badge: "PREUVE", breaking: false, proof: true,
        camp: "both",
        title: "D√©cret-programme et coupes : le budget comme outil politique",
        tags: ["d√©cret-programme", "coupes", "aust√©rit√©", "bleu", "orange"],
        body:
`Le doc insiste sur une s√©quence de coupes budg√©taires touchant culture/√©ducation permanente/associatif.
‚Üí Lecture Bleus: ‚Äúordre/gestion/fin des d√©rives‚Äù.
‚Üí Lecture Oranges: ‚Äútenir la coalition + amortir la casse‚Äù.
Le budget devient une arme de reconfiguration des contre-pouvoirs.`,
        cite: true
      },
      {
        id: uid(), ts: dateTs("2025-10-14T12:00:00"),
        badge: "INFO", breaking: false, proof: false,
        camp: "both",
        title: "Mobilisations : la rue comme contre-narratif aux cadrages budg√©taires",
        tags: ["manifestation", "mobilisation", "contre-pouvoir", "bleu", "orange"],
        body:
`Le doc mentionne une mobilisation massive contre des coupes et un cadrage politique visant √† minimiser la contestation.
‚Üí Angle : bataille discursive (majorit√© silencieuse vs foule visible).
‚Üí Utilit√© : comprendre comment se fabrique la l√©gitimit√©.`,
        cite: true
      },
      {
        id: uid(), ts: dateTs("2023-05-15T10:30:00"),
        badge: "INFO", breaking: false, proof: false,
        camp: "blue",
        title: "Tactique : ‚Äúcontribuable flou√©‚Äù (recentrage moral/financier)",
        tags: ["tactiques", "financement", "fiscal", "bleu"],
        body:
`Le doc d√©crit une strat√©gie r√©currente : r√©duire l‚Äôenjeu √† un co√ªt, puis moraliser (‚Äúargent public‚Äù, ‚Äúfin des syst√®mes‚Äù).
Effet : d√©placer le d√©bat du r√¥le d√©mocratique des associations vers une indignation comptable.`,
        cite: true
      },
      {
        id: uid(), ts: dateTs("2025-07-14T16:00:00"),
        badge: "INFO", breaking: false, proof: false,
        camp: "blue",
        title: "Tactique : outrage m√©diatique + rectification tardive",
        tags: ["r√©seaux", "outrage", "d√©sinfo", "bleu"],
        body:
`Le doc donne un exemple de pol√©mique o√π un cadrage choc circule vite, puis la mise au point arrive apr√®s.
Le m√©canisme est structurel : vitesse des r√©seaux > vitesse des v√©rifications.`,
        cite: true
      },
      {
        id: uid(), ts: dateTs("2022-09-01T09:00:00"),
        badge: "PREUVE", breaking: false, proof: true,
        camp: "both",
        title: "Fond : pilarisation, passerelles, et soup√ßons de collusion",
        tags: ["pilarisation", "passerelles", "soup√ßon", "bleu", "orange"],
        body:
`Le doc rappelle la pilarisation belge (r√©seaux historiques) et comment cela nourrit les soup√ßons de collusion.
‚Üí Angle Bleu : ‚Äúgalaxies‚Äù et captation des subsides.
‚Üí Angle Orange : m√©moire longue des r√©seaux + prudence politique.`,
        cite: true
      }
    ];

    const state = {
      query: "",
      camp: null,         // "blue" | "orange" | "both" | null
      onlyProof: false,
      onlyBreaking: false,
      wow: false
    };

    const $ = s => document.querySelector(s);

    // Clock
    setInterval(()=> $("#clock").textContent = new Date().toLocaleTimeString(undefined,{hour:"2-digit",minute:"2-digit",second:"2-digit"}), 250);

    // Init UI
    renderChips();
    renderFeed();
    renderKPIs();

    // Bind search
    $("#q").addEventListener("input", () => { state.query = $("#q").value.trim(); renderFeed(); renderKPIs(); });
    document.addEventListener("keydown", (e) => { if(e.key==="/" && document.activeElement !== $("#q")){ e.preventDefault(); $("#q").focus(); } });

    // Top buttons
    $("#btnCopyLink").addEventListener("click", () => copyText(location.href).then(()=>toast("Lien copi√©.")));

    $("#btnOpenDoc").addEventListener("click", () => {
      // Si doc.pdf n‚Äôexiste pas, on ouvre un panneau ‚Äúinstructions‚Äù
      openDocModal();
    });

    $("#btnFocusCoal").addEventListener("click", () => {
      state.camp = "both";
      state.onlyProof = true;
      state.onlyBreaking = false;
      syncStrip();
      renderFeed(); renderKPIs();
      toast("Focus coalition + preuves.");
    });

    $("#btnStart").addEventListener("click", () => {
      openModal("Pitch √©ditorial", "60 secondes ‚Äî pr√™t √† publier", `
        <div class="content">
          <h3>Pitch (BLEUS √ó ORANGES)</h3>
          <p>Ce dossier d√©crit comment les tensions autour de l‚Äô√©ducation populaire se jouent sur deux √©tages :</p>
          <ul>
            <li><strong>BLEUS</strong> : cadrage ‚ÄúASBL politis√©es‚Äù, disqualification en forum public, recentrage sur l‚Äôargent.</li>
            <li><strong>ORANGES</strong> : r√¥le de coalition et d‚Äôamortisseur, avec une prudence culturelle vis-√†-vis du monde associatif.</li>
            <li><strong>En dessous</strong> : le budget (d√©cret-programme/coupes) sert de levier de reconfiguration.</li>
          </ul>
          <p class="small">${escapeHtml(INTERNAL_DOC_CITE)}</p>
        </div>
      `, {copy: makePost("both")});
    });

    $("#btnAngles").addEventListener("click", () => {
      openModal("Angles (Bleu/Orange)", "3 traitements √©ditoriaux", `
        <div class="content">
          <h3>Angles possibles</h3>
          <ul>
            <li><strong>Angle BLEU</strong> : ‚Äúguerre des l√©gitimit√©s‚Äù ‚Äî neutralit√© vs contre-pouvoir.</li>
            <li><strong>Angle ORANGE</strong> : ‚Äúcoalition & garde-fous‚Äù ‚Äî arbitrage, √©criture de compromis, gestion de crise.</li>
            <li><strong>Angle BLEU√óORANGE</strong> : ‚Äúbudget comme arme‚Äù ‚Äî signal politique + mise en ≈ìuvre budg√©taire.</li>
          </ul>
          <div class="hr"></div>
          <button class="btn blue" id="angB">Copier post BLEU</button>
          <button class="btn orange" id="angO">Copier post ORANGE</button>
          <button class="btn" id="angBO">Copier post BLEU√óORANGE</button>
        </div>
      `);
      setTimeout(()=>{
        const angB = document.getElementById("angB");
        const angO = document.getElementById("angO");
        const angBO = document.getElementById("angBO");
        if(angB) angB.onclick = ()=> copyText(makePost("blue")).then(()=>toast("Post BLEU copi√©."));
        if(angO) angO.onclick = ()=> copyText(makePost("orange")).then(()=>toast("Post ORANGE copi√©."));
        if(angBO) angBO.onclick = ()=> copyText(makePost("both")).then(()=>toast("Post BLEU√óORANGE copi√©."));
      }, 0);
    });

    $("#btnKit").addEventListener("click", () => {
      downloadBlob(makeKitBlob(), "kit-bleus-oranges.txt");
      toast("Kit export√©.");
    });

    $("#btnShare").addEventListener("click", () => doShare({
      title: document.title,
      text: $("#shareText").value,
      url: location.href
    }));

    $("#btnMakePostBlue").addEventListener("click", () => { $("#shareText").value = makePost("blue"); toast("Post BLEU g√©n√©r√©."); });
    $("#btnMakePostOrange").addEventListener("click", () => { $("#shareText").value = makePost("orange"); toast("Post ORANGE g√©n√©r√©."); });
    $("#btnMakePostBoth").addEventListener("click", () => { $("#shareText").value = makePost("both"); toast("Post BLEU√óORANGE g√©n√©r√©."); });
    $("#btnCopyPost").addEventListener("click", () => copyText($("#shareText").value).then(()=>toast("Post copi√©.")));

    $("#btnWOW").addEventListener("click", () => {
      state.wow = !state.wow;
      document.body.style.filter = state.wow ? "saturate(1.08) contrast(1.02)" : "";
      $("#marq").style.animationDuration = state.wow ? "18s" : "30s";
      toast(state.wow ? "Mode WOW: ON" : "Mode WOW: OFF");
    });

    $("#btnOpenEmbeds").addEventListener("click", () => openEmbedsModal());

    $("#btnReset").addEventListener("click", () => {
      state.query = ""; $("#q").value = "";
      state.camp = null; state.onlyProof = false; state.onlyBreaking = false;
      syncStrip();
      renderFeed(); renderKPIs();
      toast("Reset.");
    });

    // Viewer controls
    $("#btnClear").addEventListener("click", () => clearViewer());
    $("#btnRedact").addEventListener("click", () => redactViewer());

    // Strip filters
    $("#strip").addEventListener("click", (e) => {
      const b = e.target.closest("button");
      if(!b) return;
      const camp = b.getAttribute("data-camp");
      const type = b.getAttribute("data-type");

      if(camp){
        state.camp = (state.camp === camp ? null : camp);
      }
      if(type === "proof"){
        state.onlyProof = !state.onlyProof;
      }
      if(type === "breaking"){
        state.onlyBreaking = !state.onlyBreaking;
      }
      syncStrip();
      renderFeed(); renderKPIs();
    });

    function syncStrip(){
      document.querySelectorAll(".tagbtn").forEach(x=>x.classList.remove("on"));
      if(state.camp){
        const bc = document.querySelector(`.tagbtn[data-camp="${state.camp}"]`);
        if(bc) bc.classList.add("on");
      }
      if(state.onlyProof){
        const bp = document.querySelector(`.tagbtn[data-type="proof"]`);
        if(bp) bp.classList.add("on");
      }
      if(state.onlyBreaking){
        const bb = document.querySelector(`.tagbtn[data-type="breaking"]`);
        if(bb) bb.classList.add("on");
      }
      const parts = [];
      if(state.camp) parts.push(state.camp==="both" ? "BLEU√óORANGE" : state.camp.toUpperCase());
      if(state.onlyProof) parts.push("PREUVES");
      if(state.onlyBreaking) parts.push("BREAKING");
      $("#filterLabel").textContent = "filtre: " + (parts.length ? parts.join(" + ") : "aucun");
    }

    // Modal
    const modal = $("#modal");
    $("#mClose").addEventListener("click", closeModal);
    modal.addEventListener("click", (e)=> { if(e.target===modal) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeModal(); });

    // ========= Renderers =========
    function renderChips(){
      const host = $("#chips");
      host.innerHTML = "";
      BRAND_TAGS.forEach(o=>{
        const el = document.createElement("span");
        el.className = "chip " + (o.c || "");
        el.innerHTML = `<strong>#</strong> ${escapeHtml(o.t)}`;
        host.appendChild(el);
      });
    }

    function filteredStories(){
      return STORIES
        .filter(s => !state.camp || s.camp === state.camp)
        .filter(s => !state.onlyProof || s.proof)
        .filter(s => !state.onlyBreaking || s.breaking)
        .filter(s => {
          if(!state.query) return true;
          const q = state.query.toLowerCase();
          const blob = [s.title, s.body, (s.tags||[]).join(" "), s.badge, s.camp].join(" ").toLowerCase();
          return blob.includes(q);
        })
        .sort((a,b)=> b.ts - a.ts);
    }

    function renderKPIs(){
      const stories = filteredStories();
      $("#kStories").textContent = stories.length;
      const tagSet = new Set();
      stories.forEach(s => (s.tags||[]).forEach(t => tagSet.add(t)));
      $("#kTags").textContent = tagSet.size;
      $("#kProof").textContent = stories.filter(s=>s.proof).length;
    }

    function renderFeed(){
      const host = $("#feed");
      host.innerHTML = "";
      const list = filteredStories();

      if(!list.length){
        host.innerHTML = `<div class="notice"><strong>Aucun r√©sultat.</strong> Modifie la recherche ou reset.</div>`;
        return;
      }

      list.forEach(s=>{
        const el = document.createElement("article");
        el.className = "story";
        const campBadge = s.camp === "blue" ? "blue" : (s.camp === "orange" ? "orange" : "");
        const badgeClass = s.breaking ? "breaking" : (s.proof ? "proof" : campBadge);
        const campLabel = s.camp === "both" ? "BLEU√óORANGE" : s.camp.toUpperCase();

        el.innerHTML = `
          <div class="shd">
            <span class="badge ${badgeClass}">${escapeHtml(s.badge)}</span>
            <div style="min-width:0; flex:1">
              <h3>${escapeHtml(s.title)}</h3>
              <div class="meta">
                <span>${escapeHtml(fmtDate(s.ts))}</span>
                <span>¬∑</span>
                <span>${escapeHtml(campLabel)}</span>
                <span>¬∑</span>
                <span>${escapeHtml((s.tags||[]).join(", ") || "‚Äî")}</span>
              </div>
            </div>
          </div>
          <div class="txt">${escapeHtml(truncate(s.body, 320))}</div>
          <div class="actions">
            <button class="btn ${s.camp==='blue'?'blue':(s.camp==='orange'?'orange':'')}" data-read="${s.id}">Lire</button>
            <button class="btn" data-post="${s.id}">Post</button>
            <button class="btn" data-share="${s.id}">Partager</button>
          </div>
        `;
        el.querySelector(`[data-read="${s.id}"]`).addEventListener("click", ()=> viewStory(s.id));
        el.querySelector(`[data-post="${s.id}"]`).addEventListener("click", ()=>{
          const text = makeStoryPost(s);
          openModal("Post pr√™t √† publier", "LinkedIn / Bluesky / Mastodon / X", `
            <div class="content"><pre><code>${escapeHtml(text)}</code></pre></div>
          `, {copy: text});
        });
        el.querySelector(`[data-share="${s.id}"]`).addEventListener("click", ()=>{
          const text = makeStoryPost(s);
          doShare({title: s.title, text, url: location.href});
        });
        host.appendChild(el);
      });
    }

    function viewStory(id){
      const s = STORIES.find(x=>x.id===id);
      if(!s) return;

      const campLabel = s.camp === "both" ? "BLEU√óORANGE" : s.camp.toUpperCase();
      $("#viewTitle").textContent = s.title;
      $("#viewSub").textContent = `${fmtDate(s.ts)} ¬∑ ${s.badge} ¬∑ ${campLabel} ¬∑ tags: ${(s.tags||[]).join(", ") || "‚Äî"}`;

      $("#content").innerHTML = `
        <div class="notice"><strong>Story</strong> (d√©riv√©e du doc interne) ‚Äî pr√™te pour un post.</div>
        <div class="hr"></div>
        <div class="content">
          ${renderMdLite(s.body)}
          <div class="hr"></div>
          <button class="btn ${s.camp==='blue'?'blue':(s.camp==='orange'?'orange':'')}" id="btnPostHere">Copier post</button>
          <button class="btn" id="btnDocHere">Ouvrir doc</button>
          <div class="hr"></div>
          <div class="small">${escapeHtml(INTERNAL_DOC_CITE)} :contentReference[oaicite:5]{index=5}</div>
        </div>
      `;

      document.getElementById("btnPostHere").addEventListener("click", ()=> copyText(makeStoryPost(s)).then(()=>toast("Post copi√©.")));
      document.getElementById("btnDocHere").addEventListener("click", ()=> openDocModal());
    }

    function clearViewer(){
      $("#viewTitle").textContent = "Lecteur";
      $("#viewSub").textContent = "S√©lectionne une story. Ou ouvre le doc.";
      $("#content").innerHTML = `
        <div class="content">
          <h3>√Ä faire</h3>
          <ul>
            <li>Choisis une story √† gauche</li>
            <li>Ou ouvre le doc</li>
            <li>Puis g√©n√®re un post / partage / export kit</li>
          </ul>
          <p class="small">${escapeHtml(INTERNAL_DOC_CITE)} :contentReference[oaicite:6]{index=6}</p>
        </div>
      `;
    }

    function redactViewer(){
      const el = $("#content");
      const txt = el.innerText || "";
      const red = redactText(txt);
      $("#content").innerHTML = `<div class="notice"><strong>Redact</strong> (best effort). V√©rifie manuellement.</div>
      <div class="hr"></div><pre><code>${escapeHtml(red)}</code></pre>`;
      toast("Redact appliqu√©.");
    }

    // ========= Doc / Embeds =========
    function openDocModal(){
      if(DOC_PDF_PATH){
        openModal("Document (PDF local)", DOC_PDF_PATH, `
          <iframe class="embed" src="${escapeHtml(DOC_PDF_PATH)}" title="Document PDF"></iframe>
          <div class="small" style="margin-top:10px">
            Si rien ne s‚Äôaffiche : ajoute un PDF nomm√© <span class="mono">doc.pdf</span> √† c√¥t√© de <span class="mono">index.html</span>,
            ou change la constante <span class="mono">DOC_PDF_PATH</span>.
          </div>
          <div class="hr"></div>
          <div class="notice"><strong>Source interne</strong> : ${escapeHtml(INTERNAL_DOC_CITE)} :contentReference[oaicite:7]{index=7}</div>
        `, {downloadUrl: DOC_PDF_PATH});
      } else {
        openModal("Document", "Instructions", `
          <div class="content">
            <h3>Embed du doc</h3>
            <p>Convertis le .docx en PDF, puis mets-le dans le dossier du site sous le nom <code>doc.pdf</code>.</p>
            <p>Ensuite, clique ‚ÄúOuvrir doc‚Äù.</p>
            <div class="hr"></div>
            <div class="notice"><strong>Source interne</strong> : ${escapeHtml(INTERNAL_DOC_CITE)} :contentReference[oaicite:8]{index=8}</div>
          </div>
        `);
      }
    }

    function openEmbedsModal(){
      openModal("Embeds ‚Äî mod√®les", "Copie/colle tes iframes et chemins locaux", `
        <div class="content">
          <h3>Spotify</h3>
          <pre><code>&lt;iframe class="embed" src="https://open.spotify.com/embed/track/..." loading="lazy"&gt;&lt;/iframe&gt;</code></pre>

          <h3>YouTube</h3>
          <pre><code>&lt;iframe class="embed" src="https://www.youtube-nocookie.com/embed/VIDEO_ID" loading="lazy" allowfullscreen&gt;&lt;/iframe&gt;</code></pre>

          <h3>PDF local</h3>
          <pre><code>&lt;iframe class="embed" src="doc.pdf"&gt;&lt;/iframe&gt;</code></pre>

          <h3>HTML local (sandbox)</h3>
          <pre><code>&lt;iframe class="embed" src="mon-fichier.html" sandbox="allow-scripts allow-same-origin allow-forms"&gt;&lt;/iframe&gt;</code></pre>

          <h3>JSON / MD</h3>
          <p>Tu peux charger un fichier local via fetch() si tu le mets √† c√¥t√© de index.html (GitHub Pages OK).</p>
          <pre><code>fetch("data.json").then(r=&gt;r.json()).then(console.log)</code></pre>

          <div class="hr"></div>
          <div class="notice"><strong>Source interne</strong> : ${escapeHtml(INTERNAL_DOC_CITE)} :contentReference[oaicite:9]{index=9}</div>
        </div>
      `);
    }

    // ========= Posts =========
    function makePost(mode){
      const base =
`BLEUS √ó ORANGES : tensions autour de l‚Äô√©ducation populaire (dossier live)

Ce qui se joue :
‚Ä¢ BLEUS : cadrage ‚ÄúASBL politis√©es‚Äù, disqualification publique, recentrage sur l‚Äôargent.
‚Ä¢ ORANGES : r√¥le de coalition (compromis de texte), prudence culturelle, gestion des √©quilibres.
‚Ä¢ En dessous : le budget (d√©cret-programme/coupes) comme levier de reconfiguration.

`;

      const bleu =
`ANGLE BLEU
On gagne la bataille en cadrant : l√©gitimit√©, neutralit√©, ‚Äúbon usage de l‚Äôargent public‚Äù.
Techniques : proc√®s en politisation, outrage m√©diatique, recentrage moral/financier.
Question : qui d√©finit la l√©gitimit√© du contre-pouvoir associatif ?`;

      const orange =
`ANGLE ORANGE
La coalition oblige √† amortir : compromis d‚Äô√©criture, prudence avec l‚Äôassociatif, √©viter l‚Äôincendie.
Mais le cadre budg√©taire dur produit des effets r√©els : tensions, mobilisation, fragilisation.
Question : jusqu‚Äôo√π une coalition peut ‚Äúrassurer‚Äù quand l‚Äôoutil budg√©taire tranche ?`;

      const both =
`ANGLE BLEU√óORANGE
Le n≈ìud : ‚Äúphrase muscl√©e‚Äù + ‚Äútexte rassurant‚Äù, puis mise en ≈ìuvre via coupes/d√©cret-programme.
Le signal politique et la gestion de coalition coexistent, et c‚Äôest l√† que le d√©bat devient explosif.
Question : comment √©viter que l‚Äôoutil budg√©taire serve √† affaiblir les contre-pouvoirs ?`;

      const end =
`

#politique #associatif #educationpopulaire #Belgique #coalition
(Analyse bas√©e sur une doc interne de synth√®se.)`;

      return cleanForPost(base + (mode==="blue" ? bleu : (mode==="orange" ? orange : both)) + end);
    }

    function makeStoryPost(s){
      const campLabel = s.camp === "both" ? "BLEU√óORANGE" : s.camp.toUpperCase();
      const head = `üìå ${campLabel} ‚Äî ${s.title}\n\n`;
      const body = `${s.body}\n\n`;
      const hook =
`üß† Lecture : ce n‚Äôest pas seulement ‚Äúpour/contre‚Äù, c‚Äôest une bataille de cadrage + d‚Äôoutils (texte, budget, l√©gitimit√©).
#educationpopulaire #associatif #politique`;
      return cleanForPost(head + body + hook);
    }

    function makeKitBlob(){
      const text =
`KIT ‚Äî BLEUS √ó ORANGES (Dossier live)
=================================

Source interne: ${INTERNAL_DOC_CITE}
(voir le fichier interne) :contentReference[oaicite:10]{index=10}

1) Pitch:
${makePost("both")}

2) Angle BLEU:
${makePost("blue")}

3) Angle ORANGE:
${makePost("orange")}

4) Stories:
${STORIES.map(s=>{
  const camp = (s.camp==="both"?"BLEU√óORANGE":s.camp.toUpperCase());
  return `- ${new Date(s.ts).toISOString()} [${s.badge}] ${camp} :: ${s.title}\n  tags: ${(s.tags||[]).join(", ")}\n  ${s.body}\n`;
}).join("\n")}

5) Fichiers attendus (optionnels):
- ${DOC_PDF_PATH} (PDF du doc)
- autres PDFs / html / json / md √† embed via modal

`;
      return new Blob([text], {type:"text/plain;charset=utf-8"});
    }

    // ========= Modal =========
    let modalCopyPayload = null;
    let modalDownloadPayload = null;

    function openModal(title, sub, html, opts={}){
      $("#mTitle").textContent = title;
      $("#mSub").textContent = sub || "";
      $("#mBody").innerHTML = html || "";
      $("#modal").classList.add("open");

      modalCopyPayload = opts.copy || null;
      modalDownloadPayload = null;

      if(opts.download instanceof Blob) modalDownloadPayload = {blob: opts.download, filename: opts.filename || "download.txt"};
      if(opts.downloadUrl) modalDownloadPayload = {url: opts.downloadUrl, filename: opts.filename || inferName(opts.downloadUrl)};
      if(opts.download && !(opts.download instanceof Blob)) modalDownloadPayload = {blob: opts.download, filename: opts.filename || "download.txt"};

      $("#mCopy").disabled = !modalCopyPayload;
      $("#mDownload").disabled = !modalDownloadPayload;

      $("#mCopy").onclick = () => {
        if(!modalCopyPayload) return;
        copyText(modalCopyPayload).then(()=>toast("Copi√©."));
      };

      $("#mDownload").onclick = () => {
        if(!modalDownloadPayload) return;
        if(modalDownloadPayload.blob){
          downloadBlob(modalDownloadPayload.blob, modalDownloadPayload.filename);
          toast("T√©l√©charg√©.");
        }else if(modalDownloadPayload.url){
          const a = document.createElement("a");
          a.href = modalDownloadPayload.url;
          a.download = modalDownloadPayload.filename;
          document.body.appendChild(a);
          a.click();
          a.remove();
        }
      };
    }

    function closeModal(){
      $("#modal").classList.remove("open");
      $("#mBody").innerHTML = "";
      modalCopyPayload = null;
      modalDownloadPayload = null;
      $("#mCopy").onclick = null;
      $("#mDownload").onclick = null;
    }

    // ========= Share =========
    async function doShare({title, text, url}){
      try{
        if(navigator.share){
          await navigator.share({title, text, url});
          toast("Partag√©.");
          return;
        }
      }catch(e){}
      const fallback = `${text}\n\n${url}`;
      await copyText(fallback);
      toast("Partage non dispo ‚Äî texte copi√©.");
    }

    // ========= Helpers =========
    function uid(){ return Math.random().toString(36).slice(2,10) + "-" + Date.now().toString(36); }

    function dateTs(isoLike){
      const d = new Date(isoLike);
      if(!isFinite(d.getTime())) return Date.now();
      return d.getTime();
    }

    function fmtDate(ts){
      const d = new Date(ts);
      return d.toLocaleString(undefined, {year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});
    }

    function truncate(s, n){
      s = String(s||"").trim();
      if(s.length <= n) return s;
      return s.slice(0, n-1).trim() + "‚Ä¶";
    }

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, c => ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[c]));
    }

    function renderMdLite(md){
      const lines = String(md||"").replace(/\r\n/g,"\n").split("\n");
      let html = "", inList = false;
      const flushList = ()=>{ if(inList){ html += "</ul>"; inList=false; } };
      for(const line of lines){
        const t = line.trim();
        if(!t){ flushList(); continue; }
        if(t.startsWith("### ")){ flushList(); html += `<h3>${escapeHtml(t.slice(4))}</h3>`; continue; }
        if(t.startsWith("## ")){ flushList(); html += `<h3>${escapeHtml(t.slice(3))}</h3>`; continue; }
        if(t.startsWith("# ")){ flushList(); html += `<h3>${escapeHtml(t.slice(2))}</h3>`; continue; }
        const mL = t.match(/^[-*]\s+(.*)$/);
        if(mL){
          if(!inList){ html += "<ul>"; inList=true; }
          html += `<li>${escapeHtml(mL[1])}</li>`;
          continue;
        }
        flushList();
        html += `<p>${escapeHtml(line)}</p>`;
      }
      flushList();
      return html;
    }

    function redactText(text){
      let t = String(text||"");
      t = t.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/ig, "[email masqu√©]");
      t = t.replace(/\b(\+?\d[\d\s().-]{7,}\d)\b/g, "[num√©ro masqu√©]");
      return t;
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(String(text));
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = String(text);
        ta.style.position="fixed"; ta.style.left="-9999px";
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
      }
    }

    function downloadBlob(blob, filename){
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename || "download.txt";
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 900);
    }

    function inferName(url){
      try{ return new URL(url, location.href).pathname.split("/").pop() || "download"; }
      catch{ return "download"; }
    }

    function toast(msg){
      const n = document.createElement("div");
      n.textContent = msg;
      n.style.position = "fixed";
      n.style.left = "50%";
      n.style.bottom = "16px";
      n.style.transform = "translateX(-50%)";
      n.style.padding = "10px 12px";
      n.style.borderRadius = "14px";
      n.style.background = "rgba(10,14,26,.82)";
      n.style.border = "1px solid rgba(255,255,255,.12)";
      n.style.boxShadow = "0 18px 60px rgba(0,0,0,.45)";
      n.style.color = "var(--text)";
      n.style.fontSize = "12px";
      n.style.zIndex = "600";
      n.style.backdropFilter = "blur(12px)";
      document.body.appendChild(n);
      setTimeout(()=>{ n.style.opacity="0"; n.style.transition="opacity .25s ease"; }, 1400);
      setTimeout(()=> n.remove(), 1750);
    }

    function cleanForPost(text){
      return String(text||"")
        .replace(/[ \t]+\n/g, "\n")
        .replace(/\n{3,}/g, "\n\n")
        .trim();
    }
  })();
  </script>
</body>
</html>
